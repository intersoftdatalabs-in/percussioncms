<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~     Percussion CMS
  ~     Copyright (C) 1999-2020 Percussion Software, Inc.
  ~
  ~     This program is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
  ~
  ~     This program is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU Affero General Public License for more details.
  ~
  ~     Mailing Address:
  ~
  ~      Percussion Software, Inc.
  ~      PO Box 767
  ~      Burlington, MA 01803, USA
  ~      +01-781-438-9900
  ~      support@percussion.com
  ~      https://www.percussion.com
  ~
  ~     You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <https://www.gnu.org/licenses/>
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-4.2.xsd">

   <bean id="imageWidgetResizeManager" class="com.percussion.widgets.image.services.impl.ImageResizeManagerImpl" scope="singleton">
      <property name="extension" value="" />
      <property name="contentType" value="" />
      <property name="imageFormat" value="" />
      <!-- set compression value between 0.0 (max compression) 
           and 1.0 (max quality).  -->
      <property name="compression" value=".85" />
   </bean>
   
  <!-- Cache beans used for image cache -->
   <bean id="imageWidgetDataCacheRegion"
    class="org.springframework.cache.ehcache.EhCacheFactoryBean">
    <property name="cacheManager">
        <ref bean="sys_cacheManager" />
    </property>
    <property name="cacheName" 
        value="com.percussion.widgets.image.data.ImageData" />
    <property name="eternal" value="no" />
    <property name="diskPersistent" value="yes" />
    <property name="maxElementsInMemory" value="200" /> 
    <property name="overflowToDisk" value="yes" />
    <property name="timeToIdle" value="3600" />
    <property name="timeToLive" value="3600" />  
    <!--
    Not supported property in updated ehcache
    <property name="diskStorePath" value="user.dir/perc-image-cache" />  -->
   </bean>

   <bean id="imageWidgetCacheManager"
    class="com.percussion.widgets.image.services.impl.ImageCacheManagerImpl">
    <property name="cache" ref="imageWidgetDataCacheRegion" />
   </bean>


</beans>
